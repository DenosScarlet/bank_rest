databaseChangeLog:
  - changeSet:
      id: 002-init-roles-users-cards
      author: denos
      changes:

        - insert:
            tableName: users
            columns:
              - column: { name: username, value: "admin" }
              - column: { name: password, value: "$2b$10$1pVT2HqI0aKOcBt1ubpYHeQ/S9vA4OilNbRcLjL5Y7Ay1knXJWWS." } # пароль: admin123
              - column: { name: first_name, value: "System" }
              - column: { name: last_name, value: "Administrator" }
              - column: { name: middle_name, value: "" }
              - column: { name: enabled, valueBoolean: true }

        - insert:
            tableName: users
            columns:
              - column: { name: username, value: "user1" }
              - column: { name: password, value: "$2b$10$trrJ5JbmfuR0HgUBKXRd5.fSTXfbmF8RmJkupJpM8hlLXL9NRRkly" } # пароль: user123
              - column: { name: first_name, value: "Иван" }
              - column: { name: last_name, value: "Петров" }
              - column: { name: middle_name, value: "Иванович" }
              - column: { name: enabled, valueBoolean: true }

        - insert:
            tableName: users
            columns:
              - column: { name: username, value: "user2" }
              - column: { name: password, value: "$2b$10$trrJ5JbmfuR0HgUBKXRd5.fSTXfbmF8RmJkupJpM8hlLXL9NRRkly" } # пароль: user123
              - column: { name: first_name, value: "Илья" }
              - column: { name: last_name, value: "Смирнов" }
              - column: { name: middle_name, value: "Петрович" }
              - column: { name: enabled, valueBoolean: true }

        - insert:
            tableName: cards
            columns:
              - column: { name: card_number_encrypted, value: "E+yMQuNplOfEH/szlTh84ub0wupIW8yR68D3+zKs3YnFv87BwtnPsea6N3w=" }
              - column: { name: owner_name, value: "IVAN PETROV" }
              - column: { name: expiry_month, valueNumeric: 12 }
              - column: { name: expiry_year, valueNumeric: 2028 }
              - column: { name: status, value: "ACTIVE" }
              - column: { name: balance, valueNumeric: 10000 }
              - column: { name: user_id, valueNumeric: 2 }
        - insert:
            tableName: cards
            columns:
              - column: { name: card_number_encrypted, value: "INFzw3/i4ux18Dyn+x0nuvkgQb4eBtd9kyd8HKn1zyfqgxrowUaaGUT4+Es=" }
              - column: { name: owner_name, value: "IVAN PETROV" }
              - column: { name: expiry_month, valueNumeric: 5 }
              - column: { name: expiry_year, valueNumeric: 2027 }
              - column: { name: status, value: "ACTIVE" }
              - column: { name: balance, valueNumeric: 5000 }
              - column: { name: user_id, valueNumeric: 2 }

        - insert:
            tableName: cards
            columns:
              - column: { name: card_number_encrypted, value: "6LUMBeSBAOt6jVCVyrCiXV4TdJn1NzEQMR76ISU/gDW6IhIjzklLqGXgWdI=" }
              - column: { name: owner_name, value: "ILYA SMIRNOV" }
              - column: { name: expiry_month, valueNumeric: 3 }
              - column: { name: expiry_year, valueNumeric: 2029 }
              - column: { name: status, value: "ACTIVE" }
              - column: { name: balance, valueNumeric: 2000 }
              - column: { name: user_id, valueNumeric: 3 }
        - insert:
            tableName: cards
            columns:
              - column: { name: card_number_encrypted, value: "5rG4y34V2Xmr+FqcJuew2mjr5UeRw8l3mTLot7VorzUT0rM/ZzSEej8T/cw=" }
              - column: { name: owner_name, value: "ILYA SMIRNOV" }
              - column: { name: expiry_month, valueNumeric: 7 }
              - column: { name: expiry_year, valueNumeric: 2026 }
              - column: { name: status, value: "ACTIVE" }
              - column: { name: balance, valueNumeric: 8000 }
              - column: { name: user_id, valueNumeric: 3 }

        - sql:
            sql: |
              INSERT INTO user_roles (user_id, role_id)
              SELECT u.user_id, r.role_id
              FROM users u, roles r
              WHERE u.username = 'admin' AND r.role_name = 'ROLE_ADMIN';

        - sql:
            sql: |
              INSERT INTO user_roles (user_id, role_id)
              SELECT u.user_id, r.role_id
              FROM users u, roles r
              WHERE u.username = 'user1' AND r.role_name = 'ROLE_USER';

        - sql:
            sql: |
              INSERT INTO user_roles (user_id, role_id)
              SELECT u.user_id, r.role_id
              FROM users u, roles r
              WHERE u.username = 'user2' AND r.role_name = 'ROLE_USER';
